<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 23: DRM åµæ¸¬æ¸¬è©¦ - CDN Detector</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            margin: -20px -20px 20px -20px;
            padding: 20px;
            border-radius: 8px 8px 0 0;
        }
        .test-section {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: transform 0.2s;
        }
        .button:hover {
            transform: translateY(-2px);
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .log-container {
            background: #1e1e1e;
            color: #fff;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            margin: 10px 0;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 0;
        }
        .log-entry.info { color: #87CEEB; }
        .log-entry.error { color: #FF6B6B; }
        .log-entry.success { color: #98FB98; }
        .log-entry.warning { color: #FFD700; }
        
        .drm-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .drm-system {
            background: #e9ecef;
            border-left: 4px solid #667eea;
            padding: 10px;
            margin: 5px 0;
            border-radius: 0 4px 4px 0;
        }
        
        .mpd-sample {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .test-result {
            border: 2px solid #28a745;
            background: #d4edda;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .test-result.failed {
            border-color: #dc3545;
            background: #f8d7da;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”’ Task 23: DRM åµæ¸¬æ¸¬è©¦</h1>
            <p>æ¸¬è©¦ CDN Detector çš„ DRM (Digital Rights Management) åµæ¸¬åŠŸèƒ½</p>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ æ¸¬è©¦æ¦‚è¿°</h3>
            <p>æœ¬æ¸¬è©¦å°‡é©—è­‰ä»¥ä¸‹ DRM åµæ¸¬åŠŸèƒ½ï¼š</p>
            <ul>
                <li><strong>DASH MPD DRM è§£æ</strong>ï¼šè§£æ DASH manifest ä¸­çš„ ContentProtection å…ƒç´ </li>
                <li><strong>HLS DRM åµæ¸¬</strong>ï¼šæª¢æ¸¬ HLS playlist ä¸­çš„ EXT-X-KEY åŠ å¯†</li>
                <li><strong>åª’é«”æ®µ DRM åµæ¸¬</strong>ï¼šåˆ†æ m4s æª”æ¡ˆçš„ DRM ä¿è­·ç‹€æ…‹</li>
                <li><strong>å¤šé‡ DRM ç³»çµ±æ”¯æ´</strong>ï¼šWidevineã€PlayReadyã€FairPlay ç­‰</li>
                <li><strong>å³æ™‚ DRM ç›£æ§</strong>ï¼šåœ¨å½±ç‰‡æ’­æ”¾éç¨‹ä¸­æŒçºŒç›£æ§ DRM ç‹€æ…‹</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ğŸš€ å¿«é€Ÿæ¸¬è©¦</h3>
            <div class="status info" id="extensionStatus">æ­£åœ¨æª¢æŸ¥æ“´å……åŠŸèƒ½ç‹€æ…‹...</div>
            
            <button class="button" onclick="checkExtensionStatus()">ğŸ”„ é‡æ–°æª¢æŸ¥æ“´å……åŠŸèƒ½</button>
            <button class="button" onclick="testLocalDRMParsing()">ğŸ§ª æ¸¬è©¦æœ¬åœ° DRM è§£æ</button>
            <button class="button" onclick="testGagaOOLalaMPD()">ğŸ“º æ¸¬è©¦ GagaOOLala MPD</button>
            <button class="button" onclick="testMultipleDRMSystems()">ğŸ” æ¸¬è©¦å¤šé‡ DRM ç³»çµ±</button>
            <button class="button" onclick="clearLogs()">ğŸ—‘ï¸ æ¸…é™¤æ—¥èªŒ</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š DRM åµæ¸¬çµæœ</h3>
            <div id="drmResults">
                <div class="status info">å°šæœªåŸ·è¡Œ DRM åµæ¸¬æ¸¬è©¦</div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ” GagaOOLala MPD ç¯„ä¾‹åˆ†æ</h3>
            <p>ä»¥ä¸‹æ˜¯å¾ GagaOOLala å–å¾—çš„ MPD æª”æ¡ˆç¯„ä¾‹ï¼ŒåŒ…å« Widevine å’Œ PlayReady DRM ä¿è­·ï¼š</p>
            <div class="mpd-sample" id="mpdSample">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;MPD xmlns="urn:mpeg:dash:schema:mpd:2011"&gt;
  &lt;Period id="ebec6043-3c60-4e9d-9d02-8d87c026ba8e"&gt;
    &lt;AdaptationSet segmentAlignment="true" mimeType="video/mp4"&gt;
      &lt;ContentProtection xmlns:cenc="urn:mpeg:cenc:2013" 
                        schemeIdUri="urn:mpeg:dash:mp4protection:2011" 
                        value="cenc" 
                        cenc:default_KID="b468a4a4-7f0a-3a2c-12a2-1751c99159bf"/&gt;
      &lt;ContentProtection schemeIdUri="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"&gt;
        &lt;cenc:pssh xmlns:cenc="urn:mpeg:cenc:2013"&gt;AAAAQ3Bzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAACMIARIQAAECAwQFBgcICQoLDA0ODxoKaW50ZXJ0cnVzdCIBKg==&lt;/cenc:pssh&gt;
      &lt;/ContentProtection&gt;
      &lt;ContentProtection schemeIdUri="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95"&gt;
        &lt;cenc:pssh xmlns:cenc="urn:mpeg:cenc:2013"&gt;AAACxnBzc2gAAAAAmgTweZhAQoarkuZb4IhflQAAAqamAgAAAQABAJwCPABXAFIATQBIAEUAQQBEAEUAUgAgAHgAbQBsAG4AcwA9ACIAaAB0AHQAcAA6AC8ALwBzAGMAaABlAG0AYQBzAC4AbQBpAGMAcgBvAHMAbwBmAHQALgBjAG8AbQAvAEQAUgBNAC8AMgAwADAANwAvADAAMwAvAFAAbABhAHkAUgBlAGEAZAB5AEgAZQBhAGQAZQByACIAIAB2AGUAcgBzAGkAbwBuAD0AIgA0AC4AMAAuADAALgAwACIAPgA8AEQAQQBUAEEAPgA8AFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBFAFkATABFAE4APgAxADYAPAAvAEsARQBZAEwARQBOAD4APABBAEwARwBJAEQAPgBBAEUAUwBDAFQAUgA8AC8AQQBMAEcASQBEAD4APAAvAFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBJAEQAPgBwAEsAUgBvAHQAQQBwAC8ATABEAG8AUwBvAGgAZABSAHkAWgBGAFoAdgB3AD0APQA8AC8ASwBJAEQAPgA8AEMASABFAEMASwBTAFUATQA+AEEAVwB1AG4AdQBKAHMAcQBwAHoAYwA9ADwALwBDAEgARQBDAEsAUwBVAE0APgA8AEwAQQBfAFUAUgBMAD4AaAB0AHQAcABzADoALwAvAHAAcgAuAHMAZQByAHYAaQBjAGUALgBlAHgAcAByAGUAcwBzAHAAbABhAHkALgBjAG8AbQAvAHAAbABhAHkAcgBlAGEAZAB5AC8AUgBpAGcAaAB0AHMATQBhAG4AYQBnAGUAcgAuAGEAcwBtAHgAPAAvAEwAQQBfAFUAUgBMAD4APAAvAEQAQQBUAEEAPgA8AC8AVwBSAE0ASABFAEEARABFAFIAPgA=&lt;/cenc:pssh&gt;
        &lt;mspr:pro xmlns:mspr="urn:microsoft:playready"&gt;pgIAAAEAAQCcAjwAVwBSAE0ASABFAEEARABFAFIAIAB4AG0AbABuAHMAPQAiAGgAdAB0AHAAOgAvAC8AcwBjAGgAZQBtAGEAcwAuAG0AaQBjAHIAbwBzAG8AZgB0AC4AYwBvAG0ALwBEAFIATQAvADIAMAAwADcALwAwADMALwBQAGwAYQB5AFIAZQBhAGQAeQBIAGUAYQBkAGUAcgAiACAAdgBlAHIAcwBpAG8AbgA9ACIANAAuADAALgAwAC4AMAAiAD4APABEAEEAVABBAD4APABQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsARQBZAEwARQBOAD4AMQA2ADwALwBLAEUAWQBMAEUATgA+ADwAQQBMAEcASQBEAD4AQQBFAFMAQwBUAFIAPAAvAEEATABHAEkARAA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsASQBEAD4AcABLAFIAbwB0AEEAcAAvAEwARABvAFMAbwBoAGQAUgB5AFoARgBaAHYAdwA9AD0APAAvAEsASQBEAD4APABDAEgARQBDAEsAUwBVAE0APgBBAFcAdQBuAHUASgBzAHEAcAB6AGMAPQA8AC8AQwBIAEUAQwBLAFMAVQBNAD4APABMAEEAXwBVAFIATAA+AGgAdAB0AHAAcwA6AC8ALwBwAHIALgBzAGUAcgB2AGkAYwBlAC4AZQB4AHAAcgBlAHMAcwBwAGwAYQB5AC4AYwBvAG0ALwBwAGwAYQB5AHIAZQBhAGQAeQAvAFIAaQBnAGgAdABzAE0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAEEAXwBVAFIATAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A&lt;/mspr:pro&gt;
      &lt;/ContentProtection&gt;
    &lt;/AdaptationSet&gt;
  &lt;/Period&gt;
&lt;/MPD&gt;
            </div>
            <button class="button" onclick="analyzeMPDSample()">ğŸ” åˆ†ææ­¤ MPD ç¯„ä¾‹</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“ˆ æ¸¬è©¦é€²åº¦</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="progressText">ç­‰å¾…æ¸¬è©¦é–‹å§‹...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ è©³ç´°æ—¥èªŒ</h3>
            <div class="log-container" id="logContainer">
                <div class="log-entry info">[INFO] DRM åµæ¸¬æ¸¬è©¦é é¢å·²è¼‰å…¥</div>
                <div class="log-entry info">[INFO] ç­‰å¾…ç”¨æˆ¶æ“ä½œ...</div>
            </div>
        </div>
    </div>

    <script src="test-drm-detection.js"></script>
</body>
</html> 