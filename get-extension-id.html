<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDN Detector - æ“´å±• ID å·¥å…·</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step h3 {
            margin: 0 0 10px 0;
            color: #007bff;
        }
        .extension-id {
            background: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            word-break: break-all;
            margin: 10px 0;
        }
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        .button:hover {
            background: #0056b3;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ CDN Detector æ“´å±• ID å·¥å…·</h1>
        
        <div class="warning">
            âš ï¸ <strong>æ³¨æ„</strong>ï¼šæ­¤é é¢éœ€è¦åœ¨å®‰è£äº† CDN Detector æ“´å±•çš„ Chrome ç€è¦½å™¨ä¸­é–‹å•Ÿã€‚
        </div>

        <div class="step">
            <h3>ğŸ“‹ æ‰‹å‹•ç²å–æ­¥é©Ÿ</h3>
            <ol>
                <li>é–‹å•Ÿæ–°æ¨™ç±¤é ï¼Œå‰å¾€ï¼š<strong>chrome://extensions/</strong></li>
                <li>é–‹å•Ÿå³ä¸Šè§’çš„ã€Œ<strong>é–‹ç™¼è€…æ¨¡å¼</strong>ã€é–‹é—œ</li>
                <li>æ‰¾åˆ°ã€Œ<strong>CDN Detector</strong>ã€æ“´å±•å¡ç‰‡</li>
                <li>åœ¨æ“´å±•å¡ç‰‡ä¸Šæœƒé¡¯ç¤º <strong>ID</strong>ï¼ˆ32ä½å­—æ¯æ•¸å­—çµ„åˆï¼‰</li>
                <li>è¤‡è£½è©² ID ä¸¦è²¼åˆ°æ¸¬è©¦é é¢çš„è¼¸å…¥æ¡†ä¸­</li>
            </ol>
        </div>

        <div class="step">
            <h3>ğŸ”— å¿«é€Ÿé€£çµ</h3>
            <button class="button" onclick="openExtensionsPage()">é–‹å•Ÿæ“´å±•ç®¡ç†é é¢</button>
            <button class="button" onclick="openTestPage()">é–‹å•Ÿæ¸¬è©¦é é¢</button>
        </div>

        <div class="step">
            <h3>ğŸ“ ç¯„ä¾‹æ“´å±• ID æ ¼å¼</h3>
            <p>Chrome æ“´å±• ID é€šå¸¸æ˜¯ 32 ä½çš„å°å¯«å­—æ¯å’Œæ•¸å­—çµ„åˆï¼Œä¾‹å¦‚ï¼š</p>
            <div class="extension-id">abcdefghijklmnopqrstuvwxyz123456</div>
            <p>æ‚¨çš„ CDN Detector æ“´å±• ID æœƒæ˜¯é¡ä¼¼çš„æ ¼å¼ã€‚</p>
        </div>

        <div class="step">
            <h3>ğŸ§ª æ¸¬è©¦é€£æ¥</h3>
            <p>ç²å–åˆ°æ“´å±• ID å¾Œï¼Œæ‚¨å¯ä»¥åœ¨é€™è£¡æ¸¬è©¦é€£æ¥ï¼š</p>
            <input type="text" id="testExtensionId" placeholder="è²¼ä¸Šæ‚¨çš„æ“´å±• ID" 
                   style="width: 300px; padding: 8px; margin: 5px;">
            <button class="button" onclick="testConnection()">æ¸¬è©¦é€£æ¥</button>
            <div id="testResult" style="margin-top: 10px;"></div>
        </div>

        <div class="step">
            <h3>â“ å¸¸è¦‹å•é¡Œ</h3>
            <ul>
                <li><strong>æ‰¾ä¸åˆ° CDN Detectorï¼Ÿ</strong> ç¢ºèªæ“´å±•å·²å®‰è£ä¸”å·²å•Ÿç”¨</li>
                <li><strong>æ²’æœ‰çœ‹åˆ° IDï¼Ÿ</strong> ç¢ºèªå·²é–‹å•Ÿã€Œé–‹ç™¼è€…æ¨¡å¼ã€</li>
                <li><strong>é€£æ¥æ¸¬è©¦å¤±æ•—ï¼Ÿ</strong> æª¢æŸ¥ ID æ˜¯å¦æ­£ç¢ºè¤‡è£½ï¼Œæ²’æœ‰å¤šé¤˜ç©ºæ ¼</li>
            </ul>
        </div>
    </div>

    <script>
        function openExtensionsPage() {
            try {
                window.open('chrome://extensions/', '_blank');
            } catch (error) {
                alert('ç„¡æ³•è‡ªå‹•é–‹å•Ÿï¼Œè«‹æ‰‹å‹•å‰å¾€ï¼šchrome://extensions/');
            }
        }

        function openTestPage() {
            try {
                window.open('test-media-segment-monitoring.html', '_blank');
            } catch (error) {
                alert('è«‹æ‰‹å‹•é–‹å•Ÿ test-media-segment-monitoring.html æª”æ¡ˆ');
            }
        }

        async function testConnection() {
            const extensionId = document.getElementById('testExtensionId').value.trim();
            const resultDiv = document.getElementById('testResult');
            
            if (!extensionId) {
                resultDiv.innerHTML = '<span class="error">è«‹è¼¸å…¥æ“´å±• ID</span>';
                return;
            }

            if (extensionId.length !== 32) {
                resultDiv.innerHTML = '<span class="error">æ“´å±• ID æ‡‰è©²æ˜¯ 32 ä½å­—ç¬¦</span>';
                return;
            }

            try {
                resultDiv.innerHTML = 'æ¸¬è©¦ä¸­...';
                
                const response = await chrome.runtime.sendMessage(extensionId, {
                    type: 'PING'
                });
                
                if (response && response.status === 'ok') {
                    resultDiv.innerHTML = `<span class="success">âœ… é€£æ¥æˆåŠŸï¼æ“´å±• ID æœ‰æ•ˆ</span>`;
                } else {
                    resultDiv.innerHTML = '<span class="error">âŒ é€£æ¥å¤±æ•—ï¼šæ“´å±•ç„¡å›æ‡‰</span>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ é€£æ¥å¤±æ•—ï¼š${error.message}</span>`;
            }
        }

        // é é¢è¼‰å…¥æ™‚çš„æç¤º
        window.addEventListener('load', () => {
            console.log('CDN Detector æ“´å±• ID å·¥å…·å·²è¼‰å…¥');
            console.log('è«‹æŒ‰ç…§é é¢èªªæ˜ç²å–æ‚¨çš„æ“´å±• ID');
        });
    </script>
</body>
</html> 