# CDN Detector

## 專案介紹
CDN Detector 是一個 Google Chrome 擴充功能，用於檢測當前網頁的資源是否經由 AspirappsCDN 傳遞，並提供詳細的檢測結果和實時日誌。

## 主要功能
- 🔍 **即時 CDN 檢測**：自動檢測所有網頁資源是否經由 AspirappsCDN 傳遞
- 📊 **統計儀表板**：顯示 CDN 與非 CDN 資源的詳細比例
- 📝 **實時日誌**：完整記錄所有檢測過程和結果
- 🎯 **資源分類**：支援 JavaScript、CSS、圖片、字體等資源類型識別
- 🔄 **自動刷新**：每 2 秒自動更新統計數據和日誌
- 🧹 **日誌管理**：支援查看、篩選、刷新和清除日誌

## 安裝步驟
1. 下載專案檔案到本地
2. 打開 Google Chrome，進入 `chrome://extensions/`
3. 開啟「開發者模式」（右上角開關）
4. 點擊「載入未封裝項目」，選擇專案目錄
5. 確認擴充功能已成功安裝並啟用

## 使用方式

### 基本使用
1. 點擊 Chrome 工具列上的 CDN Detector 圖標
2. 擴充功能預設為**啟用狀態**，會自動開始檢測
3. 瀏覽任意包含 AspirappsCDN 資源的網頁
4. 查看即時統計結果和詳細日誌

### 日誌功能
- **查看 CDN 資源**：預設顯示所有使用 AspirappsCDN 的資源
- **查看所有資源**：點擊「顯示所有資源」查看完整檢測記錄
- **手動刷新**：點擊「刷新」按鈕立即更新日誌
- **清除日誌**：點擊「清除日誌」重置所有記錄
- **詳細資訊**：展開每個記錄查看完整的 URL、Headers 等資訊

## 檢測邏輯
1. **主要檢測方法**：檢查 HTTP Response Header 中的 `via` 欄位
2. **AspirappsCDN 識別**：不區分大小寫匹配 "AspirappsCDN" 字串
3. **輔助檢測**：同時檢查 `server`、`x-cache` 等相關 headers
4. **資源類型識別**：根據副檔名自動分類資源類型

## 圖標狀態系統
- 🟢 **綠燈**：檢測到有資源經由 AspirappsCDN 傳遞
- 🔴 **紅燈**：未檢測到任何 AspirappsCDN 資源

## 技術特色
- **Manifest V3**：使用最新的 Chrome 擴充功能標準
- **Service Worker**：高效能的背景處理
- **即時通訊**：Popup 與 Background 間的即時數據同步
- **錯誤處理**：完整的 API 錯誤處理和降級方案
- **效能最佳化**：自動日誌清理和記憶體管理

## 故障排除

### 常見問題
1. **擴充功能無法啟動**：
   - 確認已授予所有必要權限
   - 在 `chrome://extensions/` 中重新載入擴充功能

2. **檢測不到 CDN 資源**：
   - 確認網站確實使用 AspirappsCDN
   - 檢查網路連線是否正常
   - 查看瀏覽器開發者工具的 Network 標籤

3. **日誌不更新**：
   - 點擊「刷新」按鈕手動更新
   - 重新載入當前網頁
   - 檢查擴充功能是否處於啟用狀態

### 調試模式
開啟瀏覽器開發者工具（F12），查看 Console 標籤中的詳細日誌輸出。

## 權限說明
- **webRequest**：監聽網路請求以檢測 CDN
- **activeTab**：存取當前標籤頁資訊
- **storage**：儲存設定和日誌資料
- **host_permissions**：存取所有網站的請求資料

## 版本資訊
- **版本**：1.0
- **Manifest 版本**：V3
- **相容性**：Chrome 88+

## 開發計畫
- [ ] 支援多種 CDN 提供商檢測
- [ ] 新增效能監控功能
- [ ] 提供 TLS 憑證資訊檢測
- [ ] 多語言介面支援
- [ ] 資料匯出功能
- [ ] 深色模式支援

## 授權條款
本專案採用 MIT 授權條款。

## 聯絡資訊
如有問題或建議，請透過專案 Issues 頁面回報。 