# CDN Detector - Product Requirements Document

## 專案概述
CDN Detector 是一個 Google Chrome 擴充功能，用於檢測當前網頁的資源是否經由 AspirappsCDN 傳遞，並提供詳細的檢測結果。

## 核心功能需求

### 1. 基本 CDN 檢測功能
- 檢測網頁資源的 Response Header 中的 `via` 欄位是否包含 "AspirappsCDN"
- 提供即時的檢測結果統計
- 顯示經由 CDN 和未經由 CDN 的資源數量比例

### 2. 使用者介面
- 提供簡潔的 Popup 介面
- 包含開關控制「Enable CDN Detection」功能
- 顯示檢測狀態（綠燈/紅燈）
- 顯示檢測結果的統計資料和百分比

### 3. 圖標狀態系統
- 綠燈圖標：檢測到有資源經由 AspirappsCDN 傳遞
- 紅燈圖標：未檢測到任何資源經由 AspirappsCDN 傳遞
- 動態更新圖標狀態

### 4. 資料存儲與狀態管理
- 使用 Chrome Storage API 保存檢測開關狀態
- 保存檢測統計資料
- 支援跨頁面的狀態持續性

## 技術需求

### 1. Chrome Extension 架構
- Manifest V3 標準
- Service Worker 背景服務
- Web Request API 監聽網路請求
- Chrome Storage API 資料存儲

### 2. 權限需求
- webRequest：監聽網路請求
- webRequestBlocking：處理請求攔截
- activeTab：訪問當前分頁
- host_permissions：所有網址

## 未來擴展需求

### 1. 多 CDN 支援
- 支援檢測更多類型的 CDN 服務
- 可配置的 CDN 識別規則
- 支援自訂 CDN 檢測規則

### 2. 詳細報告功能
- 提供更詳細的檢測報告
- 資源類型分類統計（JS、CSS、圖片等）
- 檢測歷史記錄
- 導出檢測結果

### 3. 多語言支援
- 繁體中文
- 英文
- 簡體中文
- 其他語言擴展

### 4. 進階檢測功能
- TLS 證書 Issuer 檢測
- Remote IP 檢測
- 更複雜的 CDN 識別邏輯
- 網路效能分析

### 5. 使用者體驗優化
- 更美觀的 UI 設計
- 響應式介面
- 深色模式支援
- 快捷鍵支援

## 品質需求
- 效能：不影響瀏覽器正常運作
- 相容性：支援 Chrome 最新版本
- 安全性：遵循 Chrome Extension 安全規範
- 可用性：直觀易用的使用者介面

## 技術限制
- 僅支援 Chrome 瀏覽器
- 需要開啟開發者模式安裝（未上架 Chrome Web Store）
- 依賴 Response Header 資訊進行檢測 